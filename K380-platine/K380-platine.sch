EESchema Schematic File Version 4
EELAYER 30 0
EELAYER END
$Descr A3 16535 11693
encoding utf-8
Sheet 1 1
Title ""
Date ""
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L Transistor_FET:DMG2301L Q1
U 1 1 628FF992
P 1550 9650
F 0 "Q1" H 1755 9696 50  0000 L CNN
F 1 "PMost Enc FET -20V" H 1755 9605 50  0000 L CNN
F 2 "Package_TO_SOT_SMD:SOT-23" H 1750 9575 50  0001 L CIN
F 3 "" H 1550 9650 50  0001 L CNN
	1    1550 9650
	1    0    0    -1  
$EndComp
$Comp
L Regulator_Linear:XC6220B331MR U1
U 1 1 62900B92
P 2800 10150
F 0 "U1" H 2800 10517 50  0000 C CNN
F 1 "XC6220B331MR" H 2800 10426 50  0000 C CNN
F 2 "Package_TO_SOT_SMD:SOT-23-5" H 2800 10150 50  0001 C CNN
F 3 "https://www.torexsemi.com/file/xc6220/XC6220.pdf" H 3550 9150 50  0001 C CNN
	1    2800 10150
	1    0    0    -1  
$EndComp
$Comp
L Battery_Management:MCP73831-2-OT U2
U 1 1 62901F10
P 6050 9650
F 0 "U2" H 5800 9900 50  0000 C CNN
F 1 "MCP73831-2-OT" H 6050 10100 50  0000 C CNN
F 2 "Package_TO_SOT_SMD:SOT-23-5_HandSoldering" H 6100 9400 50  0001 L CIN
F 3 "http://ww1.microchip.com/downloads/en/DeviceDoc/20001984g.pdf" H 5900 9600 50  0001 C CNN
	1    6050 9650
	1    0    0    -1  
$EndComp
$Comp
L Connector_Generic:Conn_01x23 J2
U 1 1 62906B4C
P 7650 6100
F 0 "J2" V 7775 6096 50  0000 C CNN
F 1 "Conn_01x23" V 7866 6096 50  0000 C CNN
F 2 "Connector_FFC-FPC:TE_2-84952-3_1x23-1MP_P1.0mm_Horizontal" H 7650 6100 50  0001 C CNN
F 3 "~" H 7650 6100 50  0001 C CNN
	1    7650 6100
	0    1    1    0   
$EndComp
$Comp
L custom_footprints:MicroMod-M.2E J3
U 1 1 62919FF9
P 2750 1100
F 0 "J3" H 2700 1365 50  0000 C CNN
F 1 "MicroMod-M.2E" H 2700 1274 50  0000 C CNN
F 2 "SparkFun MicroMod:M.2-CONNECTOR-E" H 2750 1100 50  0001 C CNN
F 3 "" H 2750 1100 50  0001 C CNN
	1    2750 1100
	1    0    0    -1  
$EndComp
Text GLabel 1150 9350 1    50   Input ~ 0
VUSB
Text GLabel 1650 8850 1    50   Input ~ 0
VBAT
Wire Wire Line
	1650 9350 1650 9450
Wire Wire Line
	1150 9350 1150 9650
Wire Wire Line
	1150 9650 1350 9650
$Comp
L Diode:MBR1020VL D1
U 1 1 6291C128
P 1400 10050
F 0 "D1" H 1400 9834 50  0000 C CNN
F 1 "MBR1020VL" H 1400 9925 50  0000 C CNN
F 2 "Diode_SMD:D_SOD-123F" H 1400 9875 50  0001 C CNN
F 3 "https://www.onsemi.com/pub/Collateral/MBR1020VL-D.PDF" H 1400 10050 50  0001 C CNN
	1    1400 10050
	-1   0    0    1   
$EndComp
Wire Wire Line
	1150 9650 1150 10050
Wire Wire Line
	1150 10050 1250 10050
Connection ~ 1150 9650
Wire Wire Line
	1550 10050 1650 10050
Wire Wire Line
	1650 9850 1650 10050
Connection ~ 1650 10050
$Comp
L power:GND #PWR01
U 1 1 6291DDB3
P 1150 10750
F 0 "#PWR01" H 1150 10500 50  0001 C CNN
F 1 "GND" H 1155 10577 50  0000 C CNN
F 2 "" H 1150 10750 50  0001 C CNN
F 3 "" H 1150 10750 50  0001 C CNN
	1    1150 10750
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR02
U 1 1 6291E2C0
P 1650 10750
F 0 "#PWR02" H 1650 10500 50  0001 C CNN
F 1 "GND" H 1655 10577 50  0000 C CNN
F 2 "" H 1650 10750 50  0001 C CNN
F 3 "" H 1650 10750 50  0001 C CNN
	1    1650 10750
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR03
U 1 1 6291EE01
P 2800 10750
F 0 "#PWR03" H 2800 10500 50  0001 C CNN
F 1 "GND" H 2805 10577 50  0000 C CNN
F 2 "" H 2800 10750 50  0001 C CNN
F 3 "" H 2800 10750 50  0001 C CNN
	1    2800 10750
	1    0    0    -1  
$EndComp
$Comp
L Device:C_Small C1
U 1 1 6291FC09
P 1650 10400
F 0 "C1" H 1742 10446 50  0000 L CNN
F 1 "10uF" H 1742 10355 50  0000 L CNN
F 2 "" H 1650 10400 50  0001 C CNN
F 3 "~" H 1650 10400 50  0001 C CNN
	1    1650 10400
	1    0    0    -1  
$EndComp
Wire Wire Line
	1650 10050 1650 10300
$Comp
L Device:R_Small R1
U 1 1 62921037
P 1150 10400
F 0 "R1" H 1209 10446 50  0000 L CNN
F 1 "100K" H 1209 10355 50  0000 L CNN
F 2 "" H 1150 10400 50  0001 C CNN
F 3 "~" H 1150 10400 50  0001 C CNN
	1    1150 10400
	1    0    0    -1  
$EndComp
Wire Wire Line
	1150 10300 1150 10050
Connection ~ 1150 10050
$Comp
L Device:R_Small R2
U 1 1 6292357B
P 2100 10250
F 0 "R2" V 1904 10250 50  0000 C CNN
F 1 "100K" V 1995 10250 50  0000 C CNN
F 2 "" H 2100 10250 50  0001 C CNN
F 3 "~" H 2100 10250 50  0001 C CNN
	1    2100 10250
	0    1    1    0   
$EndComp
Wire Wire Line
	2200 10250 2300 10250
Wire Wire Line
	2000 10250 1950 10250
Wire Wire Line
	1950 10250 1950 10050
Wire Wire Line
	1950 10050 2300 10050
Wire Wire Line
	1950 10050 1650 10050
Connection ~ 1950 10050
Wire Wire Line
	2800 10750 2800 10550
Wire Wire Line
	1650 10750 1650 10500
Wire Wire Line
	1150 10750 1150 10500
Text GLabel 3650 10050 2    50   Input ~ 0
V3.3
Wire Wire Line
	3300 10050 3400 10050
$Comp
L Device:C_Small C2
U 1 1 62927B5D
P 3400 10400
F 0 "C2" H 3492 10446 50  0000 L CNN
F 1 "4.7uF" H 3492 10355 50  0000 L CNN
F 2 "" H 3400 10400 50  0001 C CNN
F 3 "~" H 3400 10400 50  0001 C CNN
	1    3400 10400
	1    0    0    -1  
$EndComp
Wire Wire Line
	3400 10300 3400 10050
Connection ~ 3400 10050
Wire Wire Line
	3400 10050 3650 10050
$Comp
L power:GND #PWR04
U 1 1 62928832
P 3400 10750
F 0 "#PWR04" H 3400 10500 50  0001 C CNN
F 1 "GND" H 3405 10577 50  0000 C CNN
F 2 "" H 3400 10750 50  0001 C CNN
F 3 "" H 3400 10750 50  0001 C CNN
	1    3400 10750
	1    0    0    -1  
$EndComp
Wire Wire Line
	3400 10750 3400 10500
Text Notes 1800 8300 0    79   ~ 0
Power And Filtering
Text Notes 2100 8400 0    59   ~ 0
(1A output)
Wire Notes Line
	4350 11200 4350 7950
Wire Wire Line
	6050 9350 6050 9300
Wire Wire Line
	6050 9300 5650 9300
Text GLabel 5650 9300 0    59   Input ~ 0
VUSB
Text GLabel 7100 9250 1    59   Input ~ 0
VBAT
Wire Wire Line
	7100 9550 7100 9250
$Comp
L power:GND #PWR05
U 1 1 62933AC5
P 6050 10200
F 0 "#PWR05" H 6050 9950 50  0001 C CNN
F 1 "GND" H 6055 10027 50  0000 C CNN
F 2 "" H 6050 10200 50  0001 C CNN
F 3 "" H 6050 10200 50  0001 C CNN
	1    6050 10200
	1    0    0    -1  
$EndComp
Wire Wire Line
	6050 10200 6050 10150
$Comp
L Device:R_Small R3
U 1 1 6293427B
P 5550 9950
F 0 "R3" H 5609 9996 50  0000 L CNN
F 1 "RProg" H 5609 9905 50  0000 L CNN
F 2 "" H 5550 9950 50  0001 C CNN
F 3 "~" H 5550 9950 50  0001 C CNN
	1    5550 9950
	1    0    0    -1  
$EndComp
Wire Wire Line
	5550 9750 5650 9750
Wire Wire Line
	5550 10150 6050 10150
Connection ~ 6050 10150
Wire Wire Line
	6050 10150 6050 9950
Wire Wire Line
	5550 9850 5550 9750
Wire Wire Line
	5550 10150 5550 10050
Text Notes 5450 10150 2    59   ~ 0
10K = 100mA\n5K = 200mA\n2K = 500mA\nI = 1000/R ...
$Comp
L Device:C_Small C3
U 1 1 62936FA6
P 6900 9850
F 0 "C3" H 6992 9896 50  0000 L CNN
F 1 "10uF" H 6992 9805 50  0000 L CNN
F 2 "" H 6900 9850 50  0001 C CNN
F 3 "~" H 6900 9850 50  0001 C CNN
	1    6900 9850
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR06
U 1 1 6293761F
P 6900 10200
F 0 "#PWR06" H 6900 9950 50  0001 C CNN
F 1 "GND" H 6905 10027 50  0000 C CNN
F 2 "" H 6900 10200 50  0001 C CNN
F 3 "" H 6900 10200 50  0001 C CNN
	1    6900 10200
	1    0    0    -1  
$EndComp
Wire Wire Line
	6900 9750 6900 9550
Wire Wire Line
	6900 10200 6900 9950
Text GLabel 6600 10250 3    59   Input ~ 0
CStat
Text Notes 5650 8300 0    79   ~ 0
LIPO Charging
Wire Wire Line
	6450 9750 6600 9750
Wire Wire Line
	6600 9750 6600 10250
Wire Wire Line
	7100 9550 6900 9550
Connection ~ 6900 9550
Wire Wire Line
	6900 9550 6450 9550
Wire Notes Line
	7600 11200 7600 7950
$Comp
L power:GND #PWR0101
U 1 1 62947FF0
P 8650 10750
F 0 "#PWR0101" H 8650 10500 50  0001 C CNN
F 1 "GND" H 8655 10577 50  0000 C CNN
F 2 "" H 8650 10750 50  0001 C CNN
F 3 "" H 8650 10750 50  0001 C CNN
	1    8650 10750
	1    0    0    -1  
$EndComp
$Comp
L Connector:USB_C_Receptacle_USB2.0 J4
U 1 1 62949AC6
P 8650 9750
F 0 "J4" H 8757 10617 50  0000 C CNN
F 1 "USB_C_Receptacle_USB2.0" H 8757 10526 50  0000 C CNN
F 2 "" H 8800 9750 50  0001 C CNN
F 3 "https://www.usb.org/sites/default/files/documents/usb_type-c.zip" H 8800 9750 50  0001 C CNN
	1    8650 9750
	1    0    0    -1  
$EndComp
Text GLabel 9450 9150 2    59   Input ~ 0
VUSB
$Comp
L power:GND #PWR0102
U 1 1 6295443F
P 9350 8750
F 0 "#PWR0102" H 9350 8500 50  0001 C CNN
F 1 "GND" H 9355 8577 50  0000 C CNN
F 2 "" H 9350 8750 50  0001 C CNN
F 3 "" H 9350 8750 50  0001 C CNN
	1    9350 8750
	-1   0    0    1   
$EndComp
$Comp
L Device:D D2
U 1 1 62955F4D
P 9350 8950
F 0 "D2" V 9304 9030 50  0000 L CNN
F 1 "TVS 5V" V 9395 9030 50  0000 L CNN
F 2 "" H 9350 8950 50  0001 C CNN
F 3 "~" H 9350 8950 50  0001 C CNN
	1    9350 8950
	0    1    1    0   
$EndComp
Wire Wire Line
	8650 10650 8650 10700
$Comp
L Device:R R4
U 1 1 62957FD7
P 8500 10700
F 0 "R4" V 8293 10700 50  0000 C CNN
F 1 "1M" V 8384 10700 50  0000 C CNN
F 2 "" V 8430 10700 50  0001 C CNN
F 3 "~" H 8500 10700 50  0001 C CNN
	1    8500 10700
	0    1    1    0   
$EndComp
Connection ~ 8650 10700
Wire Wire Line
	8650 10700 8650 10750
Wire Wire Line
	8350 10700 8350 10650
$Comp
L Device:R R5
U 1 1 62959392
P 9850 9350
F 0 "R5" V 9643 9350 50  0000 C CNN
F 1 "5.1k 20%" V 9734 9350 50  0000 C CNN
F 2 "" V 9780 9350 50  0001 C CNN
F 3 "~" H 9850 9350 50  0001 C CNN
	1    9850 9350
	0    1    1    0   
$EndComp
$Comp
L Device:R R6
U 1 1 62959A27
P 9850 9450
F 0 "R6" V 10050 9450 50  0000 C CNN
F 1 "5.1k 20%" V 9950 9450 50  0000 C CNN
F 2 "" V 9780 9450 50  0001 C CNN
F 3 "~" H 9850 9450 50  0001 C CNN
	1    9850 9450
	0    1    1    0   
$EndComp
$Comp
L power:GND #PWR0103
U 1 1 6295B4CE
P 10050 9400
F 0 "#PWR0103" H 10050 9150 50  0001 C CNN
F 1 "GND" V 10055 9272 50  0000 R CNN
F 2 "" H 10050 9400 50  0001 C CNN
F 3 "" H 10050 9400 50  0001 C CNN
	1    10050 9400
	0    -1   -1   0   
$EndComp
Wire Wire Line
	10000 9350 10050 9350
Wire Wire Line
	10050 9450 10000 9450
Wire Wire Line
	9250 9350 9700 9350
Wire Wire Line
	9250 9450 9700 9450
Wire Wire Line
	9350 8800 9350 8750
Wire Wire Line
	9250 9150 9350 9150
Wire Wire Line
	9350 9150 9350 9100
Connection ~ 9350 9150
Wire Wire Line
	9350 9150 9450 9150
Wire Wire Line
	10050 9350 10050 9400
Connection ~ 10050 9400
Wire Wire Line
	10050 9400 10050 9450
Text GLabel 9400 9700 2    59   Input ~ 0
D-
Text GLabel 9400 9900 2    59   Input ~ 0
D+
Wire Wire Line
	9250 9950 9350 9950
Wire Wire Line
	9250 9850 9350 9850
Wire Wire Line
	9250 9750 9350 9750
Wire Wire Line
	9250 9650 9350 9650
Wire Wire Line
	9350 9650 9350 9700
Wire Wire Line
	9350 9850 9350 9900
Wire Wire Line
	9350 9700 9400 9700
Connection ~ 9350 9700
Wire Wire Line
	9350 9700 9350 9750
Wire Wire Line
	9350 9900 9400 9900
Connection ~ 9350 9900
Wire Wire Line
	9350 9900 9350 9950
Text Notes 8850 8300 0    79   ~ 0
USB Port
Wire Notes Line
	10750 7950 10750 11250
Text GLabel 11750 9250 1    50   Output ~ 0
VBAT
$Comp
L power:GND #PWR0104
U 1 1 6297DB21
P 11750 9950
F 0 "#PWR0104" H 11750 9700 50  0001 C CNN
F 1 "GND" H 11755 9777 50  0000 C CNN
F 2 "" H 11750 9950 50  0001 C CNN
F 3 "" H 11750 9950 50  0001 C CNN
	1    11750 9950
	1    0    0    -1  
$EndComp
$Comp
L Device:Q_NMOS_DGS Q2
U 1 1 62992380
P 1750 9150
F 0 "Q2" H 1955 9104 50  0000 L CNN
F 1 "Q_NMOS_DGS" H 1955 9195 50  0000 L CNN
F 2 "" H 1950 9250 50  0001 C CNN
F 3 "~" H 1750 9150 50  0001 C CNN
	1    1750 9150
	-1   0    0    1   
$EndComp
$Comp
L Device:R R7
U 1 1 62995894
P 2150 9150
F 0 "R7" V 2050 9200 50  0000 C CNN
F 1 "100K" V 2266 9150 50  0000 C CNN
F 2 "" V 2080 9150 50  0001 C CNN
F 3 "~" H 2150 9150 50  0001 C CNN
	1    2150 9150
	0    -1   -1   0   
$EndComp
Wire Wire Line
	1650 8950 1650 8900
Connection ~ 1650 8900
Wire Wire Line
	1650 8900 1650 8850
$Comp
L power:GND #PWR?
U 1 1 629C1EB6
P 12050 9950
F 0 "#PWR?" H 12050 9700 50  0001 C CNN
F 1 "GND" H 12055 9777 50  0000 C CNN
F 2 "" H 12050 9950 50  0001 C CNN
F 3 "" H 12050 9950 50  0001 C CNN
	1    12050 9950
	1    0    0    -1  
$EndComp
Text GLabel 12050 9250 1    50   Input ~ 0
VBAT
$Comp
L Device:R_Small R?
U 1 1 629C2DD2
P 12050 9400
F 0 "R?" H 12109 9446 50  0000 L CNN
F 1 "100K" H 12109 9355 50  0000 L CNN
F 2 "" H 12050 9400 50  0001 C CNN
F 3 "~" H 12050 9400 50  0001 C CNN
	1    12050 9400
	1    0    0    -1  
$EndComp
$Comp
L Device:R_Small R?
U 1 1 629C30FE
P 12050 9800
F 0 "R?" H 12109 9846 50  0000 L CNN
F 1 "100K" H 12109 9755 50  0000 L CNN
F 2 "" H 12050 9800 50  0001 C CNN
F 3 "~" H 12050 9800 50  0001 C CNN
	1    12050 9800
	1    0    0    -1  
$EndComp
$Comp
L Connector_Generic:Conn_01x02 J1
U 1 1 62903AF0
P 11500 9650
F 0 "J1" V 11372 9730 50  0000 L CNN
F 1 "JST-PH 2" V 11463 9730 50  0000 L CNN
F 2 "Connector_JST:JST_PH_S2B-PH-SM4-TB_1x02-1MP_P2.00mm_Horizontal" H 11500 9650 50  0001 C CNN
F 3 "~" H 11500 9650 50  0001 C CNN
	1    11500 9650
	-1   0    0    1   
$EndComp
Wire Wire Line
	11700 9650 11750 9650
Wire Wire Line
	11750 9650 11750 9950
Wire Wire Line
	11700 9550 11750 9550
Wire Wire Line
	11750 9250 11750 9550
Wire Wire Line
	12050 9300 12050 9250
Wire Wire Line
	12050 9950 12050 9900
Text GLabel 12250 9600 2    50   Input ~ 0
VDIV
Wire Wire Line
	12050 9700 12050 9600
Wire Wire Line
	12050 9600 12250 9600
Connection ~ 12050 9600
Wire Wire Line
	12050 9600 12050 9500
Text Notes 11300 8300 0    79   ~ 0
JST PH LiPo Input
Wire Notes Line
	13000 7950 13000 11200
$Comp
L Switch:SW_DPST_x2 SW?
U 1 1 629D6AE3
P 2150 8900
F 0 "SW?" H 2150 9135 50  0000 C CNN
F 1 "EG1215AA" H 2150 9044 50  0000 C CNN
F 2 "LibraryLoader:EG1215AA" H 2150 8900 50  0001 C CNN
F 3 "~" H 2150 8900 50  0001 C CNN
	1    2150 8900
	1    0    0    -1  
$EndComp
Wire Wire Line
	1650 8900 1950 8900
Wire Wire Line
	1950 9150 2000 9150
Wire Wire Line
	2300 9150 2500 9150
Wire Wire Line
	2500 9150 2500 8900
Wire Wire Line
	2500 8900 2350 8900
$Comp
L power:GND #PWR?
U 1 1 629DCBD7
P 14000 9100
F 0 "#PWR?" H 14000 8850 50  0001 C CNN
F 1 "GND" H 14005 8927 50  0000 C CNN
F 2 "" H 14000 9100 50  0001 C CNN
F 3 "" H 14000 9100 50  0001 C CNN
	1    14000 9100
	1    0    0    -1  
$EndComp
$Comp
L Switch:SW_Push SW?
U 1 1 629DE056
P 14300 9000
F 0 "SW?" H 14300 9285 50  0000 C CNN
F 1 "SW_Push" H 14300 9194 50  0000 C CNN
F 2 "" H 14300 9200 50  0001 C CNN
F 3 "~" H 14300 9200 50  0001 C CNN
	1    14300 9000
	1    0    0    -1  
$EndComp
Wire Wire Line
	14000 9000 14100 9000
Text GLabel 14700 9000 2    79   Input ~ 0
RESET
$Comp
L power:GND #PWR?
U 1 1 629E30F9
P 14000 9950
F 0 "#PWR?" H 14000 9700 50  0001 C CNN
F 1 "GND" H 14005 9777 50  0000 C CNN
F 2 "" H 14000 9950 50  0001 C CNN
F 3 "" H 14000 9950 50  0001 C CNN
	1    14000 9950
	1    0    0    -1  
$EndComp
$Comp
L Switch:SW_Push SW?
U 1 1 629E3139
P 14300 9850
F 0 "SW?" H 14300 10135 50  0000 C CNN
F 1 "SW_Push" H 14300 10044 50  0000 C CNN
F 2 "" H 14300 10050 50  0001 C CNN
F 3 "~" H 14300 10050 50  0001 C CNN
	1    14300 9850
	1    0    0    -1  
$EndComp
Text GLabel 14700 9850 2    79   Input ~ 0
SWITCH
Wire Wire Line
	14000 9950 14000 9850
Wire Wire Line
	14000 9850 14100 9850
Wire Wire Line
	14500 9850 14700 9850
Wire Wire Line
	14700 9000 14500 9000
Wire Wire Line
	14000 9100 14000 9000
Text Notes 13950 8300 0    79   ~ 0
Reset/User Switch
Wire Notes Line
	500  7950 16050 7950
$EndSCHEMATC
